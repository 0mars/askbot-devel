{% extends "two_column_body.html" %}
{% import "macros.html" as macros %}
<!-- template ask.html -->
{% block title %}{% spaceless %}{% trans %}Ask Your Question{% endtrans %}{% endspaceless %}{% endblock %}
{% block forestyle %}
    <link rel="stylesheet" type="text/css" href="{{"/js/wmd/wmd.css"|media}}" />
{% endblock %}
{# main contents of ask form is in the template input_bar #}
{% block sidebar %}
    {% if settings.EDITOR_TYPE == 'markdown' %}
        {% include "/widgets/markdown_help.html" %}
    {% endif %}
{% endblock %}
{% block content %}
    <div class="question-instructions">
        {% set can_post = True %}{# false if email needs validation #}
        {% if not request.user.is_authenticated() %}
            <ul>
                <li class="warning">{% trans %}since you are not logged in right now, you will be asked to sign in or register after posting your question{% endtrans %}</li>
            </ul>
        {% else %}
            {% if settings.EMAIL_VALIDATION and request.user.email_isvalid == False %}
            <div class="email-validator">
                <p class="prompt">{% trans email=request.user.email %}Your email address, {{ email }} has not yet been validated and your posts cannot be published.{% endtrans %}</p>
                {% set can_post = False %}
                <button class="submit">{% trans %}Validate your email now{% endtrans %}</button>
            </div>
            {% endif %}
        {% endif %}
        <div {% if can_post == False %}class="cannot-post"{% endif %}>
            {% if settings.QUESTION_INSTRUCTIONS %}
                {{ settings.QUESTION_INSTRUCTIONS|safe }}
            {% else %}
                <ul>
                    <li>{% trans %}please, try to make your question interesting to this community{% endtrans %}</li>
                    <li>{% trans %}provide enough details{% endtrans %}</li>
                    <li>{% trans %}be clear and concise{% endtrans %}</li>
                </ul>
            {% endif %}
        </div>
    </div>
    {% include "widgets/ask_form.html" %}
{% endblock %}
{% block endjs %}
    <script type='text/javascript' src='{{"/js/editor.js"|media}}'></script>
    <script type='text/javascript' src='{{"/js/jquery.validate.js"|media}}'></script>
    <script type='text/javascript' src='{{"/js/post.js"|media}}'></script>
    {% if settings.EDITOR_TYPE == 'markdown' %}
        <script type='text/javascript' src='{{"/js/wmd/showdown.js"|media}}'></script>
        <script type='text/javascript' src='{{"/js/wmd/wmd.js"|media}}'></script>
    {% endif %}
    {% include "meta/editor_data.html" %}
    {% if mandatory_tags %}
        {% include "meta/mandatory_tags_js.html" %}
    {% endif %}
    {% if settings.TAG_SOURCE == 'category-tree' %}
        {% include "meta/category_tree_js.html" %}
    {% endif %}
    <script type='text/javascript'>
        askbot['urls']['saveDraftQuestion'] = '{% url save_draft_question %}';
        {% if settings.ENABLE_MATHJAX or settings.MARKUP_CODE_FRIENDLY %}
            var codeFriendlyMarkdown = true;
        {% else %}
            var codeFriendlyMarkdown = false;
        {% endif %}
    </script>
{% endblock %}

<!-- end template ask.html -->
